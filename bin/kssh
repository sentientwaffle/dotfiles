#!/bin/sh -eu

# usage:
# $ kssh
# $ kssh <pod>

# Open a shell on a kubernetes pod for debugging.

# TODO it would be nice if this would automatically fall back to /bin/sh when
# /bin/bash in unavailable.

if [ $# -eq 0 ]; then
	pod=$(kubectl get pods -o name | fzy)
else
	pod=$1
fi

set -x
kubectl exec --stdin=true --tty=true "$pod" -- /bin/bash
set +x
