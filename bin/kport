#!/bin/sh -eu

# usage:
# $ kport
# $ kport <pod>
# $ kport <pod> <port>

# Port-forward to/from the specified (or chosen) pod.
# By default, use the Node.js debugger port (9229).

port=${2:-9229}

if [ $# -eq 0 ]; then
	pod=$(kubectl get pods -o name | fzy)
else
	pod=$1
fi

set -x
kubectl port-forward "$pod" "$port:$port"
set +x
