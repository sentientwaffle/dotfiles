#!/usr/bin/env bash

# Wrap xbacklight brightness controls.

# TODO: xrandr --output HDMI1 --brightness 0.5
# TODO: what about inverting the display's color

usage() {
	cat <<-EOF
	usage: ${0##*/} <command>

	commands:
	  up   [major|minor] # Increase brightness
	  down [major|minor] # Decrease brightness
	  get                # Get current brightness
	EOF
}

fail() {
	usage >&2
	exit 1
}

get_delta() {
	if [[ "$1" == 'minor' ]]; then
		echo 1
	else
		echo 10
	fi
}

case "$1" in
	up)   xbacklight -inc $(get_delta "$2") ;;
	down) xbacklight -dec $(get_delta "$2") ;;
	get)  xbacklight -get ;;
	*)    fail ;;
esac
